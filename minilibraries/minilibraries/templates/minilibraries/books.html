{% extends "base.html" %}

{% block title %}Books{% endblock %}

{% block content %}
<div class="page-center">
    <h2>Books</h2>
    <button id="reg-button">Register Book</button>
    <div id="books-container">
        {% for book in books %}
            <div class="book">
                <img src="https://covers.openlibrary.org/b/isbn/{{book.isbn}}-M.jpg" loading="lazy"><br>
                <a href="{% url 'book' book.id %}" target="_blank" class="book-title {% if book.borrower %}taken{% endif %}">{{book.title}}</a>
            </div>
        {% endfor %}
    </div>
</div>
<dialog id="reg-modal">
    <h1>hi</h1>
    <form action="/book/add" method="post" class="form">
        {% csrf_token %}
        {{ form }}
        <input type="submit" value="Submit">
    </form>
    <button id="reg-exit">Close</button>
</dialog>
<script>
    const reg_button = document.getElementById("reg-button");
    const reg_modal = document.getElementById("reg-modal");
    const reg_exit = document.getElementById("reg-exit");

    reg_button.addEventListener("click", () => {
        reg_modal.showModal();
    });

    reg_exit.addEventListener("click", () => {
        reg_modal.close();
    });
</script>
{% endblock %}